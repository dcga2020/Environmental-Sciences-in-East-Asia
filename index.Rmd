--- 
title: "Environmental Sciences in East Asia"
author: "EA30E Spring 2021"
date: "`r Sys.Date()`"
site: bookdown::bookdown_site
---

# Preface

## Context and Positionality

## Project Guide

### Rationale

Learning science and communicating science are two sides of a coin -- and as an interatrive process, we will learn and write about environmental issues and sciences in East Asia by creating a web-based text. 

### Stages of Work and Milestones

After selection a topic, each student will be a lead author and a contributing author for a particular text, which will in most cased be a chapter. 

Since writing is an iterative process, we will use various processes to review, revise, and improve our text. The text will be published on the EA Student Webpage at the conclusion of the course. 

#### Proposed Schedule

- Feb 12 Assign Authors and Contributors
- Feb 17 Draft Outline
- Feb 24 Research Report
- March 2 Draft Text
- March 9 Peer Reviews
- March 20 Revised Text for Grading
- March 31 Final Revision
- April 3 Gap Identification
- April 10 Scoping Research
- April 17 Draft Outline
- April 24 Draft Text
- April 30 Peer Review
- May X 5, Submission for Grading

### Grading

TBD

## Revision History and Process

### Publication Dates

I will regularly push and publish the results of the text based on submissions. 



### Using R Markdown

In the past, I used \LaTeX to make publication quality text, but because we will to make this into a on-line resource, creating HTML code is a better option. 

R Markdown is a relatively simple language to use and will allow us to integrate text and data science into the web text. 

I have provided some basic resources for R Markdown, but there are numerous electronic resources available for free that can also be consulted.

- [Marc's Video Description](www.tbd.com)
- [R Studio's Cheatsheet](https://rstudio.com/wp-content/uploads/2016/03/rmarkdown-cheatsheet-2.0.pdf?_ga=2.107420162.161662097.1613074083-214354297.1613074083)

### Using R to Create Figures

In Figure 

```{r, label=updatedata, echo=FALSE, results='hide', eval=FALSE}
address <- "ftp://aftp.cmdl.noaa.gov/products/trends/co2/co2_mm_mlo.txt"
download.file(address, "maunaloa", quiet = F, mode = "w", cacheOK = T)

maunaloa <- read.table("maunaloa", skip=70)
names(maunaloa) <- c("year", "month", "decimal.date", "average", "interpolated", "trend", "days")
maunaloa$average[maunaloa$average==-99.99] <- NA
maunaloa <- data.frame(year=maunaloa$year, month=maunaloa$month, decimal.date=maunaloa$decimal.date, average=maunaloa$average)
head(maunaloa)
str(maunaloa)
write.csv(maunaloa, file = "/home/CAMPUS/mwl04747/github/Environmnental-Sciences-in-East-Asia/data/maunaloa.csv", eol = "\n", row.names = F)
```

```{r, label=analyzingdata, echo=FALSE, results=FALSE, warning=FALSE, message=FALSE}
maunaloa = read.csv("/home/CAMPUS/mwl04747/github/Environmnental-Sciences-in-East-Asia/data/maunaloa.csv")
library(tidyverse)
library(caret)
library(mgcv)

# Split the data into training and test set
set.seed(123)
training.samples <- maunaloa$average %>%
  createDataPartition(p = 0.8, list = FALSE)
train.data  <- maunaloa[training.samples, ]
test.data <- maunaloa[-training.samples, ]
future.data = max(maunaloa$decimal.date)+1:36/12

# Build the model
model <- gam(average ~ s(decimal.date), data = maunaloa)
summary(model)
# Make predictions
predictions <- model %>% predict(test.data)
# Model performance
data.frame(
  RMSE = RMSE(predictions, test.data$average),
  R2 = R2(predictions, test.data$average)
)
```


```{r, echo=FALSE, caption='Carbon Dioxide Measure on Mauna Loa, HI'}
theme_set(theme_classic())
ggplot(train.data, aes(decimal.date, average) ) + 
#  stat_smooth(method = lm, formula = y ~ poly(x, 3, raw = TRUE), fullrange=T) +
  geom_line() + xlab("Year") + ylab("Carbon Dioxide (ppm)") +
  stat_smooth(method = gam, formula = y ~ s(x), color = "red") +
  theme(axis.text.x = element_text(size=14),
          axis.text.y = element_text(size=14), 
          axis.title=element_text(size=14))

```



## Acknowledgements